# Issues using DRF with GNU Radio Companion

## The Challenge

There is a problem with my system's GRC and using the DigitalRF (DRF) GNU Radio blocks: using a DRF block causes the execution of a flowgraph to immediately end.

## How I Know Part I (The Experience)

Already saw some oddities like how using blocks would cause the flowgraph to be finished executing immediately with return code -11. Also, when one flowgraph would contain both a QT GUI sink block (different types) and a DRF block, there would never appear any GUI.

The same thing happens even with the default embedded Python block when inserted into a flow graph, so this must be a problem with my system rather than DRF. When I followed the Python Block tutorial on GNU Radio Wiki, it did not work and had this problem.

## How I Know Part II (The Sink Test)

See: test_drf_sinkblock.grc

I attached an RTL-SDR source to the flowgraph (and physically to my computer) and allowed the RTL-SDR information to flow to a QT GUI Sink, a File Sink, and a DRF Sink.

I did this both with and without a Stream to Vector block in from of the DRF Sink; it did not make a difference. Also note that in order for a DRF file to even be generated, the director input into the block must be either an empty directory or nonexistent.

When just put into the QT GUI Sink and the File Sink (set to "overwrite" mode), the flowgraph works fine. The GUI remains until I close it, and the file generated by the File Sink exists and grows in size the longer data is collected.

However, when the DRF Sink block is attached and enabled, the issue of the execution of the flowgraph being "instantaneously" completed with a return code of -11. No GUI appears, and the file to which the File Sink block stores data is empty.

## How I Know Part III (The Source Test)

See: test_drf_sourceblock.grc

The same type of thing happens with the DRF Source block. The code execution ends immediately (with a return code -11) and the file storing the data passed from the source is empty.

This is true with either treating the data as a stream of ints or as two vectors of shorts. The number of samples to read does not affect this issue either.

## Connection with Python?

See: test_embeddedpythonblock.grc

The exact same issue occurs when using a Python block. Why is this?

## Update: OOT

Also can't do OOT modules. As soon as I try to create one (`gr_modtool newmod testingOOT`), there is an error: `UnicodeDecodeError: 'utf-8' codec can't decode byte 0x99 in position 1088: invalid start byte` from `File "/Users/vivelpanel/anaconda3/envs/gnuradio/lib/python3.10/codecs.py", line 322, in decode (result, consumed) = self._buffer_decode(data, self.errors, final)`.

This must be some issue with the way I installed GNU Radio or Anaconda.

## My System

I installed GNU Radio via Anaconda, with CondaForge. I also downloaded various packages like digital_rf, volk, gnuradio-osmosdr, gnuradio-core, and more.

My Python version is 3.10.5 and my GRC version is 3.9.5.0.

I am on OSX (10.12.6) on a 2015 MacBook Air laptop.
